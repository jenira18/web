<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>การใช้บริการรถโดยสาร มรพส.</title>
</head>
<body>
    <image src="รูปปกเว็บ.png" Width="110%" 
    
    <html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0; 
        }
        .container {
            width: 100%;
            margin: 0 auto;
            padding: 30px;
            background-color: #fff; 
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50; /* สีเขียว */
            color: white; 
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049; /* สีเขียวเข้มเมื่อชี้ */
        }
        </style> 
      <!DOCTYPE html>
      <html lang="th">
      <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>ระบบ QR Code ขึ้นรถ</title>     
          <style>
              body {
                  font-family: Arial, sans-serif;
                  margin: 0;
                  padding: 20px;
                  background-color: #f0f0f0;
              }
              .container {
                  width: 100%;
                  margin: 0 auto;
                  padding: 30px;
                  background-color: #fff;
                  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
              }
              h1 {
                  text-align: center;
              }
              #history {
                  margin-top: 20px;
              }
              button {
                  padding: 10px 20px;
                  background-color: #4CAF50;
                  color: white;
                  border: none;
                  cursor: pointer;
              }
              button:hover {
                  background-color: #45a049;
              }
          </style>
      </head>
      <body>
          <h1>ระบบ QR Code ขึ้นรถ</h1>
          <h3 id="availableSeats">จำนวนที่นั่งที่ว่าง: 8 ที่นั่ง</h3>
          <h3 id="totalUsersToday">จำนวนผู้ใช้บริการวันนี้: 0 คน</h3>
          
          <div id="history">
              <h4>ประวัติการเช็คอินขึ้นรถ:</h4>
              <ul id="checkInHistory"></ul>
              <h4>ประวัติการลงจากรถ:</h4>
              <ul id="checkOutHistory"></ul>
          </div>
      
          <!-- ปุ่มกดสำหรับลงจากรถ -->
          <button id="checkOutButton">ลงจากรถโดยสาร</button>
      
          <script>
              // ค่าเริ่มต้นของที่นั่งว่าง
let maxSeats = 8; // แก้ไขให้ถูกต้อง

// ฟังก์ชันสำหรับการอัปเดตประวัติการเช็คอิน
function addCheckInHistory(action) {
    const now = new Date();
    const timestamp = now.toLocaleTimeString(); // แสดงเวลา
    const date = now.toLocaleDateString(); // แสดงวันที่
    checkInHistory.innerHTML += `<li>${action} เวลา: ${timestamp} วันที่: ${date}</li>`;
}

// ฟังก์ชันสำหรับการอัปเดตประวัติการเช็คเอาท์
function addCheckOutHistory(action) {
    const now = new Date();
    const timestamp = now.toLocaleTimeString();
    const date = now.toLocaleDateString();
    checkOutHistory.innerHTML += `<li>${action} เวลา: ${timestamp} วันที่: ${date}</li>`;
}

      
              // ฟังก์ชันอัปเดตจำนวนที่นั่งว่าง
              const availableSeatsElement = document.getElementById('availableSeats');
              const checkInHistory = document.getElementById('checkInHistory');
              const checkOutHistory = document.getElementById('checkOutHistory');
              const totalUsersTodayElement = document.getElementById('totalUsersToday');
      
              function updateAvailableSeats() {
                  let currentSeats = localStorage.getItem('availableSeats');
                  availableSeatsElement.innerText = `จำนวนที่นั่งที่ว่าง: ${currentSeats} ที่นั่ง`;
              }
      
              // ฟังก์ชันแสดงจำนวนผู้ใช้บริการวันนี้
              function updateTotalUsersToday() {
                  let totalUsers = localStorage.getItem('totalUsersToday');
                  totalUsersTodayElement.innerText = `จำนวนผู้ใช้บริการวันนี้: ${totalUsers} คน`;
              }
      
              // ฟังก์ชันบันทึกประวัติการเช็คอิน
              function addCheckInHistory(action) {
                  const now = new Date();
                  const timestamp = now.toLocaleString(); // เวลาและวันที่
                  checkInHistory.innerHTML += `<li>${action} เวลา: ${timestamp}</li>`;
              }
      
              // ฟังก์ชันบันทึกประวัติการเช็คเอาท์
              function addCheckOutHistory(action) {
                  const now = new Date();
                  const timestamp = now.toLocaleString(); // เวลาและวันที่
                  checkOutHistory.innerHTML += `<li>${action} เวลา: ${timestamp}</li>`;
              }
      
              // เมื่อโหลดหน้าให้แสดงจำนวนที่นั่งและประวัติที่บันทึกไว้ใน LocalStorage
              window.onload = function() {
                  updateAvailableSeats();
                  updateTotalUsersToday();
                  if (localStorage.getItem('checkInHistory')) {
                      checkInHistory.innerHTML = localStorage.getItem('checkInHistory');
                  }
                  if (localStorage.getItem('checkOutHistory')) {
                      checkOutHistory.innerHTML = localStorage.getItem('checkOutHistory');
                  }
              };
      
              // ฟังก์ชันเช็คอิน (ลดจำนวนที่นั่ง 1 และเพิ่มผู้ใช้บริการวันนี้)
              function checkIn() {
                  let currentSeats = parseInt(localStorage.getItem('availableSeats'));
                  if (currentSeats > 0) {
                      localStorage.setItem('availableSeats', currentSeats - 1);
                      updateAvailableSeats();
                      addCheckInHistory("ขึ้นรถโดยสาร");
      
                      // บันทึกประวัติใน LocalStorage
                      localStorage.setItem('checkInHistory', checkInHistory.innerHTML);
      
                      // เพิ่มจำนวนผู้ใช้บริการวันนี้
                      let totalUsers = parseInt(localStorage.getItem('totalUsersToday'));
                      localStorage.setItem('totalUsersToday', totalUsers + 1);
                      updateTotalUsersToday();
                  } else {
                      alert('ที่นั่งเต็มแล้ว');
                  }
              }
      
              // ฟังก์ชันเช็คเอาท์ (เพิ่มจำนวนที่นั่ง 1)
              function checkOut() {
                  let currentSeats = parseInt(localStorage.getItem('availableSeats'));
                  if (currentSeats < maxSeats) {
                      localStorage.setItem('availableSeats', currentSeats + 1);
                      updateAvailableSeats();
                      addCheckOutHistory("ลงจากรถ");
      
                      // บันทึกประวัติใน LocalStorage
                      localStorage.setItem('checkOutHistory', checkOutHistory.innerHTML);
                  } else {
                      alert('ไม่มีคนลงจากรถ');
                  }
              }
      
              // ฟังก์ชันจำลองการสแกน QR Code (จะถูกเรียกเมื่อสแกนสำเร็จ)
              function onQRCodeScanned() {
                  checkIn();
              }
      
              // เชื่อมต่อกับปุ่มลงจากรถ
              document.getElementById('checkOutButton').addEventListener('click', checkOut);
      
              // ตัวอย่างฟังก์ชันที่ใช้เรียกเมื่อมีการสแกน QR
              // คุณจะต้องเชื่อมต่อกับระบบสแกน QR Code ของโทรศัพท์ในส่วนนี้
              // ตัวอย่างเช่น: onQRCodeScanned();
          </script>
      </body>
      </html>
      